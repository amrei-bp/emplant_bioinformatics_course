<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.549">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>EMPLANT course - Tips and Tools for Reproducible Bioinformatics</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script src="site_libs/quarto-diagram/mermaid.min.js"></script>
<script src="site_libs/quarto-diagram/mermaid-init.js"></script>
<link href="site_libs/quarto-diagram/mermaid.css" rel="stylesheet">


<link rel="stylesheet" href="styles.css">
</head>

<body class="nav-sidebar docked nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">EMPLANT course</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link active" href="./data_management.html" aria-current="page"> 
<span class="menu-text">Reproducibility</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./qc.html"> 
<span class="menu-text">Quality control</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
          <div class="quarto-navbar-tools">
    <div class="dropdown">
      <a href="" title="" id="quarto-navigation-tool-dropdown-0" class="quarto-navigation-tool dropdown-toggle px-1" data-bs-toggle="dropdown" aria-expanded="false" aria-label=""><i class="bi bi-github"></i></a>
      <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="quarto-navigation-tool-dropdown-0">
          <li>
            <a class="dropdown-item quarto-navbar-tools-item" href="https://github.com/amrei-bp/emplant_bioinformatics_course">
            Source Code
            </a>
          </li>
          <li>
            <a class="dropdown-item quarto-navbar-tools-item" href="https://github.com/amrei-bp/emplant_bioinformatics_course/issues">
            Report a Bug
            </a>
          </li>
      </ul>
    </div>
</div>
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./data_management.html">Reproducibility</a></li></ol></nav>
        <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation docked overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
      <a href="./index.html" class="sidebar-logo-link">
      <img src="./figures/logo/SLUBI_logo.png" alt="" class="sidebar-logo py-0 d-lg-inline d-none">
      </a>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">About the course</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./data_management.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">Reproducibility</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./qc.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Quality control</span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#data-life-cycle" id="toc-data-life-cycle" class="nav-link active" data-scroll-target="#data-life-cycle">Data Life Cycle</a></li>
  <li><a href="#fair-principles" id="toc-fair-principles" class="nav-link" data-scroll-target="#fair-principles">FAIR principles</a>
  <ul class="collapse">
  <li><a href="#fair-in-practice" id="toc-fair-in-practice" class="nav-link" data-scroll-target="#fair-in-practice">FAIR in practice</a></li>
  <li><a href="#a-small-fair-habit-file-names" id="toc-a-small-fair-habit-file-names" class="nav-link" data-scroll-target="#a-small-fair-habit-file-names">A small FAIR habit: file names</a></li>
  </ul></li>
  <li><a href="#reproducible-research" id="toc-reproducible-research" class="nav-link" data-scroll-target="#reproducible-research">Reproducible research</a></li>
  <li><a href="#what-data-do-we-work-with" id="toc-what-data-do-we-work-with" class="nav-link" data-scroll-target="#what-data-do-we-work-with">What data do we work with?</a></li>
  <li><a href="#working-with-data" id="toc-working-with-data" class="nav-link" data-scroll-target="#working-with-data">Working with data</a></li>
  <li><a href="#literate-programming" id="toc-literate-programming" class="nav-link" data-scroll-target="#literate-programming">Literate programming</a></li>
  <li><a href="#practical-markdown" id="toc-practical-markdown" class="nav-link" data-scroll-target="#practical-markdown">Practical: Markdown</a></li>
  <li><a href="#goal-for-the-rest-of-this-session" id="toc-goal-for-the-rest-of-this-session" class="nav-link" data-scroll-target="#goal-for-the-rest-of-this-session">Goal for the rest of this session</a></li>
  <li><a href="#version-control" id="toc-version-control" class="nav-link" data-scroll-target="#version-control">Version control</a></li>
  <li><a href="#environment-managers" id="toc-environment-managers" class="nav-link" data-scroll-target="#environment-managers">Environment managers</a></li>
  <li><a href="#containers-in-bioinformatics" id="toc-containers-in-bioinformatics" class="nav-link" data-scroll-target="#containers-in-bioinformatics">Containers in bioinformatics</a></li>
  <li><a href="#workflow-manager" id="toc-workflow-manager" class="nav-link" data-scroll-target="#workflow-manager">Workflow manager</a></li>
  <li><a href="#putting-it-all-together" id="toc-putting-it-all-together" class="nav-link" data-scroll-target="#putting-it-all-together">Putting it all together</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Tips and Tools for Reproducible Bioinformatics</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<p><br></p>
<section id="data-life-cycle" class="level2">
<h2 class="anchored" data-anchor-id="data-life-cycle">Data Life Cycle</h2>
<p>When working with any type of data, it makes sense to sit down before the project starts to think through the different life stages of the data in your project. This will help counteract some of the problems that can arise when projects grow more organically, and will help consistency within the research group, ease collaboration, and mostly your future self that will understand what past-self has been up to in the project.</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>More and more funding agencies expect a Data Management Plan at some point of a project application. In there, you need to document that you have thought of, and planned for, the life cycle of your data.</p>
</div>
</div>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="figures/data_management/Data_life_cycle.png" class="class img-fluid figure-img" style="width:50.0%"></p>
<figcaption><a href="https://rdmkit.elixir-europe.org/">The Research Data Management toolkit for Life Sciences</a></figcaption>
</figure>
</div>
<p>Thinking about the data life cycle early helps avoid many common problems later — especially when projects grow, collaborators join, or analyses need to be repeated.</p>
</section>
<section id="fair-principles" class="level2">
<h2 class="anchored" data-anchor-id="fair-principles">FAIR principles</h2>
<p>In the past, research <strong>data was often generated with one question in mind</strong>. Often, they would afterwards land in some drawer and be forgotten about. Nowadays researchers acknowledge that <strong>data can also be re-used, or combined with other data, to answer different questions</strong>.</p>
<p>The FAIR principles promote <strong>efficient data discovery and reuse</strong> by providing guidelines to make digital resources:</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="figures/data_management/fair-data-principles.webp" class="class img-fluid figure-img" style="width:50.0%"></p>
<figcaption><a href="https://www.tpximpact.com/knowledge-hub/insights/fair-data-guide/">Wilkinson et al.&nbsp;(2016)</a></figcaption>
</figure>
</div>
<section id="fair-in-practice" class="level3">
<h3 class="anchored" data-anchor-id="fair-in-practice">FAIR in practice</h3>
<p>FAIR does <strong>not</strong> mean “open” or “perfect”. It means that <em>someone else</em> (or future-you) can understand and reuse your data with reasonable effort.</p>
<p>Examples:</p>
<ul>
<li><strong>Findable</strong>
<ul>
<li>Raw sequencing data deposited in ENA/SRA with a stable accession.</li>
<li>Files named in a consistent way (not <code>final_final_v3_really_final.fastq.gz</code>).</li>
</ul></li>
<li><strong>Accessible</strong>
<ul>
<li>Data stored in a repository that others can access (even if access is controlled).</li>
<li>Clear instructions on <em>how</em> to request access if data is sensitive.</li>
</ul></li>
<li><strong>Interoperable</strong>
<ul>
<li>Using standard formats (FASTQ, BAM, VCF).</li>
<li>Using standard metadata (sample IDs, species names, genome versions).</li>
</ul></li>
<li><strong>Reusable</strong>
<ul>
<li>A README explaining how the data was generated.</li>
<li>Software versions and parameters documented.</li>
</ul></li>
</ul>
<p>So you can see that FAIR principles, in turn, rely on <strong>good data management practices</strong> in all phases of research:</p>
<ul>
<li>Research documentation</li>
<li>Data organisation</li>
<li>Information security</li>
<li>Ethics and legislation</li>
</ul>
</section>
<section id="a-small-fair-habit-file-names" class="level3">
<h3 class="anchored" data-anchor-id="a-small-fair-habit-file-names">A small FAIR habit: file names</h3>
<p>You will not make your data or analyses fully fair in one go. And you don’t have to!</p>
<p>Try implementing one, or a few things, at a time, and once they are part of the way you work try adding something else.</p>
<p>File names are often the <strong>first piece of metadata</strong> someone encounters. They are also one of the easiest things to improve. Remember: File names are not only for computers. They are for humans trying to make sense of a project.</p>
<div class="callout callout-style-default callout-tip callout-titled" title="Discussion: better file names">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Discussion: better file names
</div>
</div>
<div class="callout-body-container callout-body">
<p>You receive these three files from a collaborator:</p>
<ul>
<li><code>final.fastq</code></li>
<li><code>data_new.fastq</code></li>
<li><code>sampleB.fastq</code></li>
</ul>
<p>What information is missing? What would you rename them to?</p>
</div>
</div>
</section>
</section>
<section id="reproducible-research" class="level2">
<h2 class="anchored" data-anchor-id="reproducible-research">Reproducible research</h2>
<p>Lucky for us, once we implement good data management practices, we will also increase the <strong>reproducibility of our analyses</strong>. That means that analyses can be <strong>run again on the same or similar data</strong> and get the <strong>same results</strong>.</p>
<div class="callout callout-style-default callout-tip callout-titled" title="Think about it">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Think about it
</div>
</div>
<div class="callout-body-container callout-body">
<p>Have you ever:</p>
<ul>
<li>re-run an analysis and obtained a different result?</li>
<li>struggled to understand your own code after some time?</li>
<li>inherited data or scripts without documentation?</li>
</ul>
<p>These are common reproducibility problems.</p>
</div>
</div>
<p>Extensive documentation will increase trust in the outcome of analyses, and will help people (and again, future-you) <strong>understand what was done, and why</strong>.</p>
<p>Reproducibility is also important for practical reasons. Research projects often change over time: new samples are added, low-quality samples are removed, or reviewers ask for additional analyses. If analyses are reproducible, these changes are much easier to handle.</p>
<p>Last, but not least, reproducible research practices make project hand-overs smoother. When someone new joins a project, they can rely on clear structure and good documentation, instead of starting from scratch.</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>And one more time: reproducible research is not about perfection. It is about making your work understandable and repeatable. <strong>Small improvements already make a big difference.</strong></p>
</div>
</div>
</section>
<section id="what-data-do-we-work-with" class="level2">
<h2 class="anchored" data-anchor-id="what-data-do-we-work-with">What data do we work with?</h2>
<blockquote class="blockquote">
<p>Bioinformatics is an interdisciplinary field of science that develops methods and software tools for understanding biological data, especially when the data sets are large and complex. (<a href="https://en.wikipedia.org/wiki/Bioinformatics">Wikipedia</a>)</p>
</blockquote>
<p>This data can come from a variety of different biological processes:</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="figures/data_management/bioinformatics_dogma.png" class="class img-fluid figure-img" style="width:70.0%"></p>
<figcaption>source: Lizel Potgieter</figcaption>
</figure>
</div>
<p>Early on, sequencing data was not readily available, but due to <a href="https://www.genome.gov/about-genomics/fact-sheets/Sequencing-Human-Genome-cost">decreasing costs</a> and <a href="https://en.wikipedia.org/wiki/Moore%27s_law">increased computational power</a> biological data is now being produced in ever increasing quantities:</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="figures/data_management/SRA_available_data.jpg" class="class img-fluid figure-img" style="width:70.0%"></p>
<figcaption><a href="https://academic.oup.com/nar/article/50/D1/D387/6438001">Growth of the Sequence Read Archive, SRA, from 2012 to 2021</a></figcaption>
</figure>
</div>
<p>At the same time, new technologies are being developed, and new tools that might or might not be maintained or benchmarked against existing tools. It’s the wild west out there!</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="figures/data_management/technologies.png" class="class img-fluid figure-img" style="width:70.0%"></p>
<figcaption>Overview of modern sequencing technologies and where they apply to biological processes</figcaption>
</figure>
</div>
</section>
<section id="working-with-data" class="level2">
<h2 class="anchored" data-anchor-id="working-with-data">Working with data</h2>
<p>Often, with a new project, one sits down with the data, tries out things and see if they worked. A lot of bioinformatics is not being afraid to try things, and reading the documentation.</p>
<p>This traditional way of working with bioinformatics data can have merits and lead to new discoveries. However, in this course we would like to <strong>introduce you to a more structured way to make sense of your data</strong>.</p>
<p>Let’s have a look at a typical PhD student’s research project:</p>
<ul>
<li>They might analyse their data, and get some results.</li>
<li>After talking with their supervisor they might get a few other samples from a collaborator, or need to drop them from the analyses due to quality concerns.</li>
<li>They run the analyses again and get a different set of results.</li>
<li>There might be a few iterations of this process, and then the reviewers require some additional analyses…</li>
</ul>
<p>In the “end” we have something like this:</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="figures/data_management/data_chaos.png" class="class img-fluid figure-img" style="width:20.0%"></p>
<figcaption>Which one of these is the latest version?</figcaption>
</figure>
</div>
<p>This kind of chaos is rarely due to bad intentions or lack of skill. It usually happens because <strong>projects evolve</strong>, <strong>data changes</strong>, and <strong>analyses are repeated without a clear structure</strong>.</p>
<div class="callout callout-style-default callout-tip callout-titled" title="Best practices file organization">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Best practices file organization
</div>
</div>
<div class="callout-body-container callout-body">
<ul>
<li>There is a folder for the raw data, which <strong>does not get altered</strong>.</li>
<li>Code is <strong>kept separate</strong> from data.</li>
<li>Use a <strong>version control</strong> system (at least for code) – e.g.&nbsp;git.</li>
<li>There should be a <strong>README</strong> in every directory, describing the purpose of the directory and its contents.</li>
<li>Use <strong>file naming</strong> schemes that makes it easy to find files and understand what they are (for humans and machines) and document them.</li>
<li>Use <strong>non-proprietary formats</strong> – .csv rather than .xlsx</li>
<li><strong>Separate files</strong> input, intermediate, and final output files go in different directories.</li>
<li><strong>Avoid manual changes</strong> to result files, use (semi-)automated scripts instead.</li>
</ul>
</div>
</div>
</section>
<section id="literate-programming" class="level2">
<h2 class="anchored" data-anchor-id="literate-programming">Literate programming</h2>
<p>Even with good file organisation, our hypothetical PhD student will still run the same analyses over and over whenever the input data changes. Sometimes, this might be months, or even years, after the original analysis was performed.</p>
<p>One solution is to save analysis code in scripts (for example R, Python, or bash), using clear file names and comments. This already improves reproducibility compared to running commands manually.</p>
<p>However, <strong>scripts and documentation are often stored in separate places</strong>, the code in one file, the notes about the analysis in another document, and results somewhere else. This makes it harder to understand how everything fits together.</p>
<p>Literate programming is an approach where <strong>code and explanation are written together in the same document</strong>. The idea is that a human should be able to read the document from top to bottom and understand what the analysis is doing and why they were chosen.</p>
<p>The code is placed in special blocks (often called <em>code chunks</em> or <em>code cells</em>) that can be run directly from within the document.</p>
<blockquote class="blockquote">
<p>Debugging is twice as hard as writing the code in the first place. Therefore, if you write the code as cleverly as possible, you are, by definition, not smart enough to debug it.<br>
— Brian Kernighan</p>
</blockquote>
<p>There are several tools that support literate programming. Examples include Jupyter Notebooks, R Markdown, and Quarto.</p>
<p>Quarto is very close to my heart, it’s easy and very versatile. I have, for example, used it to make this homepage, for example. But for now, we will focus on the underlying idea using plain <strong>Markdown</strong>.</p>
<div class="callout callout-style-default callout-tip callout-titled" title="Think like a reader">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Think like a reader
</div>
</div>
<div class="callout-body-container callout-body">
<p>Imagine you open an analysis document written by someone else.</p>
<p>What would you want to know:</p>
<ul>
<li>before running the analysis?</li>
<li>while reading the code?</li>
<li>when interpreting the results?</li>
</ul>
<p>These are exactly the things literate programming tries to capture.</p>
</div>
</div>
</section>
<section id="practical-markdown" class="level2">
<h2 class="anchored" data-anchor-id="practical-markdown">Practical: Markdown</h2>
<p>We can try out markdown, the language used in many literate programming notebooks online. Please follow this link to <a href="https://markdownlivepreview.com/">https://markdownlivepreview.com/</a>.</p>
<div class="callout callout-style-default callout-tip callout-titled" title="Exercise: a minimal reproducible document">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Exercise: a minimal reproducible document
</div>
</div>
<div class="callout-body-container callout-body">
<p>Using the online Markdown editor, write a small report on a project you’d like to work on:</p>
<ol type="1">
<li>It should have a title</li>
<li>It should contain a little bit of text about the project.</li>
<li>It should contain a link to a wikipedia page (or any other homepage).</li>
</ol>
<p>Think of this as a <em>human-readable analysis report</em>.</p>
</div>
</div>
</section>
<section id="goal-for-the-rest-of-this-session" class="level2">
<h2 class="anchored" data-anchor-id="goal-for-the-rest-of-this-session">Goal for the rest of this session</h2>
<p>With the following, I want to give you ideas and tools that will help you plan and carry out your research.</p>
<p>We will not actually train on the tools, but if you spend some time learning them by yourself, I guarentee that <strong>they will make your work more efficient</strong> (and more reproducible).</p>
<p>No matter what kind of data you are working with, I hope you will take something useful from this course and today.</p>
<p><br> <img src="figures/data_management/technologies.png" class="class img-fluid" style="width:70.0%" alt="Overview of modern sequencing technologies and where they apply to biological processes"></p>
</section>
<section id="version-control" class="level2">
<h2 class="anchored" data-anchor-id="version-control">Version control</h2>
<p>Even with well-organised files and clearly documented analyses, our hypothetical PhD student’s <strong>project continues to evolve over time</strong>. They might fix a small mistake they caught somewhere, adjust parameters after discussing with their supervisor, or extend the analyses after reviewer comments.</p>
<p>A very common way of handling this is to create multiple copies of the same file, often with only slightly different names. While this feels safe, it <strong>quickly becomes confusing</strong>. It is hard to know which file was used to generate a specific result, and easy to accidentally work on the wrong version.</p>
<p>To keep track of <em>what</em> changed, <em>when</em>, and <em>why</em>, our student can use <strong>version control</strong>.</p>
<p>There are several version control tools that can help with tracking files. One very popular one is <strong>git</strong>. Git keeps a history of changes to files, rather than creating multiple copies of them.</p>
<p>It can track changes to text files and works best for <strong>text-based files</strong>, such as scripts, Markdown documents, and configuration files.</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p><strong>Large raw data files</strong> (for example sequencing data) are usually <strong>not tracked with git</strong>. Instead, these files are stored separately, while git tracks the code and documentation that describe how the data was processed.</p>
</div>
</div>
<p>Version control also helps when working with other people. Several people can work on the same project without overwriting each other’s work, and it is possible to return to an earlier state if something goes wrong.</p>
<p>So, version control can help us manage changes to code and documentation. However, reproducibility also depends on having the same software available across systems.</p>
</section>
<section id="environment-managers" class="level2">
<h2 class="anchored" data-anchor-id="environment-managers">Environment managers</h2>
<p>So far, our hypothetical PhD student has organised their files, documented their analyses, and started using version control to track changes to code and documents.</p>
<p>However, they now run into a new problem: The <strong>same analysis can behave differently on different computers</strong>, <strong>code that worked perfectly on one machine may fail or behave differently on another</strong>.</p>
<p>Different computers can run on different operating systems, or can have different versions of databases installed. This can lead to conflicts between tools, or software versions and can impact code usability, or reproducibility.</p>
<p>One way to address this problem is to clearly define the <strong>software environment</strong> used for an analysis.</p>
<p>A software environment describes which tools and versions are used and which libraries they depend on.</p>
<p>Environment managers are tools that help create and manage such software environments.</p>
<p>They automatically <strong>find and install the correct versions of tools and libraries</strong>, making it much easier to run the same analysis on different computers.</p>
<p>There are several environment managers commonly used in bioinformatics, for example: <code>Conda</code>, <code>Bioconda</code>, or <code>Pixi</code>.</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>Today, we will not be using environment managers, but I hope you remember them when the time comes. It’s great to not have to manually install tools anymore!</p>
</div>
</div>
<p>By using an environment manager, we can be confident that:</p>
<ul>
<li>the same tools are used across machines,</li>
<li>collaborators can recreate the environment,</li>
<li>and analyses are less likely to break due to software differences.</li>
</ul>
</section>
<section id="containers-in-bioinformatics" class="level2">
<h2 class="anchored" data-anchor-id="containers-in-bioinformatics">Containers in bioinformatics</h2>
<p>Environment managers help our PhD student ensure that the same software versions are used across different computers.</p>
<p>However, there are <strong>situations where this is not enough</strong>.</p>
<p>For example, the student might need to:</p>
<ul>
<li>run their analysis on a high-performance computing cluster,</li>
<li>share the analysis with collaborators using a different operating system,</li>
<li>or rerun the analysis several years later on a new system.</li>
</ul>
<p>In these cases, <strong>differences between operating systems can still cause problems</strong>, even if the same software versions are used.</p>
<p>Containers provide a way to package everything needed to run an analysis in one place. They <strong>contain the software tools</strong>, their <strong>dependencies</strong> and even the <strong>operating system</strong>. This means that the analysis runs in the same environment, regardless of where the container is used.</p>
<p>Containers are shared as <strong>container images</strong>. An image is a fixed, read-only snapshot of the environment. Because container images do not change over time, they help ensure that analyses produce the same results today and in the future. <strong>Think of a container as a self-contained box that runs the same way everywhere.</strong></p>
<p>Common container technologies in bioinformatics include:</p>
<ul>
<li>Docker</li>
<li>Singularity (also known as Apptainer)</li>
</ul>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>We will not work with containers today, but remember that they are a powerful tool that can help you scale your analyses effectively.</p>
</div>
</div>
</section>
<section id="workflow-manager" class="level2">
<h2 class="anchored" data-anchor-id="workflow-manager">Workflow manager</h2>
<p>At this point, our exemplary PhD student has:</p>
<ul>
<li>well-organised files,</li>
<li>documented analyses,</li>
<li>version-controlled code,</li>
<li>and a consistent software setup using environments or containers.</li>
</ul>
<p>This already improves reproducibility a lot. However, running analyses is still largely a manual process: running scripts in the correct order and monitoring them for execution of failure.</p>
<p><strong>Manual coordination takes time and concentration</strong>. It also increases the risk of small mistakes, especially when analyses are complex or need to be repeated many times.</p>
<p><code>Workflow managers</code> are tools that describe an analysis as a <strong>set of connected steps</strong>.</p>
<p>Each step takes defined input files, performs a specific task, and produces defined output files.</p>
<p>The workflow manager then takes care of running these steps in the correct order. <strong>This makes analyses more efficient and less error-prone.</strong></p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Tip
</div>
</div>
<div class="callout-body-container callout-body">
<p>Humans tend to do mistakes, especially when it comes to tedious or repetitive tasks. If you automate data handling, formatting etc. you are less likely to make mistakes like typos, or changing colors in images.</p>
</div>
</div>
<p>There are several workflow managers used in bioinformatics. One widely used example is <strong>Nextflow</strong>.</p>
<p>By using Nextflow, our student no longer has to remember which commands to run and in which order. Instead, <strong>the workflow itself becomes a clear, reproducible description of the analysis</strong>.</p>
</section>
<section id="putting-it-all-together" class="level2">
<h2 class="anchored" data-anchor-id="putting-it-all-together">Putting it all together</h2>
<p>Throughout this module, we followed our hypothetical PhD student as their project grew in complexity.</p>
<p>At each stage, new challenges appeared:</p>
<ul>
<li>data had to be organised and documented,</li>
<li>analyses needed to be rerun and updated,</li>
<li>software behaved differently across systems,</li>
<li>and manual execution became error-prone.</li>
</ul>
<p>Each tool we introduced addresses a <strong>specific problem</strong>. They are not alternatives to each other, but <strong>build on top of one another</strong>.</p>
<div class="cell" data-layout-align="default">
<div class="cell-output-display">
<div>
<p></p><figure class="figure"><p></p>
<div>
<pre class="mermaid mermaid-js">flowchart BT
  R["Raw data&lt;br/&gt;&lt;span style='font-size:0.8em'&gt;stored separately, unchanged&lt;/span&gt;"]:::raw
  D["Code &amp; documentation&lt;br/&gt;&lt;span style='font-size:0.8em'&gt;scripts, Markdown, README&lt;/span&gt;"]:::code
  V["Version control&lt;br/&gt;&lt;span style='font-size:0.8em'&gt;git&lt;/span&gt;"]:::vc
  E["Environment manager&lt;br/&gt;&lt;span style='font-size:0.8em'&gt;Pixi, Conda&lt;/span&gt;"]:::env
  C["Container&lt;br/&gt;&lt;span style='font-size:0.8em'&gt;Docker, Singularity&lt;/span&gt;"]:::cont
  W["Workflow manager&lt;br/&gt;&lt;span style='font-size:0.8em'&gt;Nextflow&lt;/span&gt;"]:::wf

  R --&gt; D --&gt; V --&gt; E --&gt; C --&gt; W

  classDef raw  fill:#f9f9f9,stroke:#999,stroke-width:1px,rx:10,ry:10;
  classDef code fill:#eef4ff,stroke:#6b8dd6,stroke-width:1px,rx:10,ry:10;
  classDef vc   fill:#ede7f6,stroke:#7e57c2,stroke-width:1px,rx:10,ry:10;
  classDef env  fill:#e8f6f1,stroke:#4aa382,stroke-width:1px,rx:10,ry:10;
  classDef cont fill:#fff3e6,stroke:#d19a66,stroke-width:1px,rx:10,ry:10;
  classDef wf   fill:#f3e8ff,stroke:#8b6fcf,stroke-width:1px,rx:10,ry:10;

</pre>
</div>
<p></p></figure><p></p>
</div>
</div>
</div>
<p>The higher we move in the diagram, the <strong>more predictable and repeatable</strong> our analysis becomes.</p>
<p>At the same time, <strong>the lower layers remain essential</strong>: raw data stays unchanged, and clear code and documentation are always the foundation.</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>You <strong>do not need to use all of these tools for every project</strong>. Many analyses only require a few of these layers.</p>
<p>However, understanding how they fit together helps you:</p>
<ul>
<li>choose the right tool for the problem at hand,</li>
<li>recognise common sources of errors,</li>
<li>and gradually improve the reproducibility of your work.</li>
</ul>
</div>
</div>
<p>And most importanlty, these ideas apply regardless of the type of data or tools you use and they will remain useful throughout your research career.</p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>